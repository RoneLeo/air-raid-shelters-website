webpackJsonp([3],{NVSH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"basetable",data:()=>({companyForm:{},disabled:!1,map:{},positionPicker:{},marker:{}}),mounted(){this.$nextTick(()=>{this.initMap(),window.setTimeout(()=>{this.getData()},300)})},created(){},computed:{},destoryed(){this.map&&this.map.remove(this.marker),this.map&&this.map.destory()},methods:{initMap(){this.map=new AMap.Map("AMap_container",{zoom:16});let t=!0;"undefined"==typeof AMapUI&&(t=!1,this.$axios.get("http://webapi.amap.com/ui/1.0/main.js?v=1.0.11").then(e=>{"undefined"!=typeof AMapUI?t=!0:this.$message.error("无法加载地图")})),t&&AMapUI.loadUI(["misc/PositionPicker"],t=>{this.positionPicker=new t({mode:"dragMap",map:this.map}),this.positionPicker.start(this.map.getCenter()),this.positionPicker.on("success",t=>{this.companyForm.jwd=t.position.lat+","+t.position.lng,this.companyForm.lxdz=t.address})})},setMarker(){let t=this.companyForm.jwd.split(","),e=new AMap.LngLat(t[1],t[0]);this.map&&(this.map.setCenter(e),this.marker=new AMap.Marker({icon:"//vdata.amap.com/icons/b18/1/2.png",position:e,offset:new AMap.Pixel(-12,-12)}),this.marker.setMap(this.map))},edit(){this.disabled=!1,this.map.remove(this.marker);let t=this.companyForm.jwd.split(","),e=new AMap.LngLat(t[1],t[0]);this.positionPicker.start(e)},save(){let t="/contactUs/add";this.companyForm.id&&(t="/contactUs/update"),this.$axios.post(t,this.$qs.stringify(Object.assign({},this.companyForm))).then(t=>{this.disabled=!0,this.positionPicker.stop(),this.setMarker()})},getData(){this.$axios.post("/contactUs/findByGsid").then(t=>{this.companyForm=t.data,console.log(this.companyForm),null!==this.companyForm?(this.disabled=!0,this.positionPicker.stop(),this.disabled=!0,this.setMarker()):this.companyForm={gsmc:"",lxdh:"",lxdz:"",lxcz:"",gswz:"",lxyb:"",lxyx:""}})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 公司信息")])],1)],1),t._v(" "),a("div",{staticClass:"container",staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticClass:"company-box",staticStyle:{"min-width":"900px","max-width":"95%",height:"auto",padding:"20px 0 50px"}},[a("el-form",{ref:"companyForm",attrs:{model:t.companyForm,"label-width":"120px",size:"medium"}},[a("el-form-item",{staticStyle:{display:"block",width:"98%"},attrs:{label:"公司名称"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.gsmc,callback:function(e){t.$set(t.companyForm,"gsmc",e)},expression:"companyForm.gsmc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"经纬度"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.companyForm.jwd,callback:function(e){t.$set(t.companyForm,"jwd",e)},expression:"companyForm.jwd"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系地址"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.lxdz,callback:function(e){t.$set(t.companyForm,"lxdz",e)},expression:"companyForm.lxdz"}})],1),t._v(" "),a("el-form-item",{staticStyle:{display:"block",width:"98%"},attrs:{label:""}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"AMap_container"}})]),t._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.lxdh,callback:function(e){t.$set(t.companyForm,"lxdh",e)},expression:"companyForm.lxdh"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系传真"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.lxcz,callback:function(e){t.$set(t.companyForm,"lxcz",e)},expression:"companyForm.lxcz"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系邮编"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.lxyb,callback:function(e){t.$set(t.companyForm,"lxyb",e)},expression:"companyForm.lxyb"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系邮箱"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.lxyx,callback:function(e){t.$set(t.companyForm,"lxyx",e)},expression:"companyForm.lxyx"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司网站"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.gswz,callback:function(e){t.$set(t.companyForm,"gswz",e)},expression:"companyForm.gswz"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备案信息"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.baxx,callback:function(e){t.$set(t.companyForm,"baxx",e)},expression:"companyForm.baxx"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司描述"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.gsms,callback:function(e){t.$set(t.companyForm,"gsms",e)},expression:"companyForm.gsms"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"搜索关键字"}},[a("el-input",{attrs:{disabled:t.disabled},model:{value:t.companyForm.gjz,callback:function(e){t.$set(t.companyForm,"gjz",e)},expression:"companyForm.gjz"}})],1),t._v(" "),a("el-form-item",{staticStyle:{display:"block",width:"98%"},attrs:{label:"公司简介"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:30},disabled:t.disabled,s:""},model:{value:t.companyForm.gsjj,callback:function(e){t.$set(t.companyForm,"gsjj",e)},expression:"companyForm.gsjj"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[t.companyForm.id?[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"medium",type:"primary",icon:"el-icon-lx-edit",disabled:!t.disabled},on:{click:t.edit}},[t._v("编辑\n                    ")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-check",disabled:t.disabled},on:{click:t.save}},[t._v("\n                        保存\n                    ")])]:[a("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-check",disabled:t.disabled},on:{click:t.save}},[t._v("\n                        保存\n                    ")])]],2)],1)])])},staticRenderFns:[]};var o=a("C7Lr")(s,i,!1,function(t){a("t10J"),a("nyZC")},"data-v-33dcde7c",null);e.default=o.exports},nyZC:function(t,e){},t10J:function(t,e){}});