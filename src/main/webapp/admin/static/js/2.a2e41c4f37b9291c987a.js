webpackJsonp([2],{"93oj":function(e,t){},NVSH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"basetable",data:()=>({companyForm:{},disabled:!1,map:{},positionPicker:{},marker:{},gsmc:""}),mounted(){this.$nextTick(()=>{this.initMap(),window.setTimeout(()=>{this.getData()},300)})},created(){this.$axios.get("/company/findGsmcByGsid").then(e=>{this.gsmc=e.data})},computed:{},destoryed(){this.map&&this.map.remove(this.marker),this.map&&this.map.destory()},methods:{initMap(){this.map=new AMap.Map("AMap_container",{zoom:16});let e=!0;"undefined"==typeof AMapUI&&(e=!1,this.$axios.get("http://webapi.amap.com/ui/1.0/main.js?v=1.0.11").then(t=>{"undefined"!=typeof AMapUI?e=!0:this.$message.error("无法加载地图")})),e&&AMapUI.loadUI(["misc/PositionPicker"],e=>{this.positionPicker=new e({mode:"dragMap",map:this.map}),this.positionPicker.on("success",e=>{this.companyForm.jwd=e.position.lat+","+e.position.lng,this.companyForm.lxdz=e.address})})},setMarker(){let e=this.companyForm.jwd.split(","),t=new AMap.LngLat(e[1],e[0]);this.map&&(this.map.setCenter(t),this.marker=new AMap.Marker({icon:"//vdata.amap.com/icons/b18/1/2.png",position:t,offset:new AMap.Pixel(-12,-12)}),this.marker.setMap(this.map))},edit(){this.disabled=!1,this.map.remove(this.marker);let e=this.companyForm.jwd.split(","),t=new AMap.LngLat(e[1],e[0]);this.positionPicker.start(t)},save(){let e="/contactUs/add";this.companyForm.id&&(e="/contactUs/update"),this.$axios.post(e,this.$qs.stringify(Object.assign({},this.companyForm))).then(e=>{200===e.resCode?(this.disabled=!0,this.positionPicker.stop(),this.$message({message:e.resMsg,type:"success"}),this.setMarker()):this.$message({message:e.resMsg,type:"error"})})},getData(){this.$axios.post("/contactUs/findByGsid").then(e=>{this.companyForm=e.data,null!==this.companyForm?(this.disabled=!0,this.setMarker()):(this.companyForm={gsmc:this.gsmc,lxdh:"",lxdz:"",lxcz:"",gswz:"",lxyb:"",lxyx:""},this.positionPicker.start(this.map.getCenter()))})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 公司信息")])],1)],1),e._v(" "),a("div",{staticClass:"container",staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticClass:"company-box",staticStyle:{"min-width":"900px","max-width":"95%",height:"auto",padding:"20px 0 50px"}},[a("el-form",{ref:"companyForm",attrs:{model:e.companyForm,"label-width":"120px",size:"medium"}},[a("el-form-item",{staticStyle:{display:"block",width:"98%"},attrs:{label:"公司名称"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.gsmc,callback:function(t){e.$set(e.companyForm,"gsmc",t)},expression:"companyForm.gsmc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经纬度"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.companyForm.jwd,callback:function(t){e.$set(e.companyForm,"jwd",t)},expression:"companyForm.jwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.lxdz,callback:function(t){e.$set(e.companyForm,"lxdz",t)},expression:"companyForm.lxdz"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block",width:"98%"},attrs:{label:""}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"AMap_container"}})]),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.lxdh,callback:function(t){e.$set(e.companyForm,"lxdh",t)},expression:"companyForm.lxdh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系传真"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.lxcz,callback:function(t){e.$set(e.companyForm,"lxcz",t)},expression:"companyForm.lxcz"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系邮编"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.lxyb,callback:function(t){e.$set(e.companyForm,"lxyb",t)},expression:"companyForm.lxyb"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系邮箱"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.lxyx,callback:function(t){e.$set(e.companyForm,"lxyx",t)},expression:"companyForm.lxyx"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司网站"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.gswz,callback:function(t){e.$set(e.companyForm,"gswz",t)},expression:"companyForm.gswz"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备案信息"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.baxx,callback:function(t){e.$set(e.companyForm,"baxx",t)},expression:"companyForm.baxx"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司描述"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.gsms,callback:function(t){e.$set(e.companyForm,"gsms",t)},expression:"companyForm.gsms"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"搜索关键字"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.companyForm.gjz,callback:function(t){e.$set(e.companyForm,"gjz",t)},expression:"companyForm.gjz"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block",width:"98%"},attrs:{label:"公司简介"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:30},disabled:e.disabled,s:""},model:{value:e.companyForm.gsjj,callback:function(t){e.$set(e.companyForm,"gsjj",t)},expression:"companyForm.gsjj"}})],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[e.companyForm.id?[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"medium",type:"primary",icon:"el-icon-lx-edit",disabled:!e.disabled},on:{click:e.edit}},[e._v("编辑\n                    ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-check",disabled:e.disabled},on:{click:e.save}},[e._v("\n                        保存\n                    ")])]:[a("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-check",disabled:e.disabled},on:{click:e.save}},[e._v("\n                        保存\n                    ")])]],2)],1)])])},staticRenderFns:[]};var o=a("C7Lr")(s,i,!1,function(e){a("dvxC"),a("93oj")},"data-v-714e8e47",null);t.default=o.exports},dvxC:function(e,t){}});